#include "stdafx.h"
#include <vector>
#include <string>
#include <array>
using namespace std;

class processor
{
private:
	vector<uint16_t> programToRun;
	uint16_t pc = 0x200;
	array<uint16_t, 16> stack;
	int sp = -1;
	array<bool, 64 * 32> display;
	int I = 0;
	array<uint8_t, 16> R;
	uint8_t DT = 0;
	uint8_t ST = 0;
	bool exception;
	string errorText;
	array<uint8_t, 5 * 16> sprites = {
		// 0
		0xF0, 0x90, 0x90, 0x90, 0xF0,
		// 1
		0x20, 0x60, 0x20, 0x20, 0x70,
		// 2
		0xF0, 0x10, 0xF0, 0x80, 0xF0,
		// 3
		0xF0, 0x10, 0xF0, 0x10, 0xF0,
		// 4
		0x90, 0x90, 0xF0, 0x10, 0x10,
		// 5
		0xF0, 0x80, 0xF0, 0x10, 0xF0,
		// 6
		0xF0, 0x80, 0xF0, 0x90, 0xF0,
		// 7
		0xF0, 0x10, 0x20, 0x40, 0x40,
		// 8
		0xF0, 0x90, 0xF0, 0x90, 0xF0,
		// 9
		0xF0, 0x90, 0xF0, 0x10, 0xF0,
		// A
		0xF0, 0x90, 0xF0, 0x90, 0x90,
		// B
		0xE0, 0x90, 0xE0, 0x90, 0xE0,
		// C
		0xF0, 0x80, 0x80, 0x80, 0xF0,
		// D
		0xE0, 0x90, 0x90, 0x90, 0xE0,
		// E
		0xF0, 0x80, 0xF0, 0x80, 0xF0,
		// F
		0xF0, 0x80, 0xF0, 0x80, 0x80	
	};

public:
	processor(vector<uint16_t> romFile);

	void run();

	~processor();
};

